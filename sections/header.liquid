{%- liquid
  assign main_menu = linklists[section.settings.main_menu_link_list]
  assign toolbar_menu = linklists[section.settings.toolbar_menu]

  assign logo_alignment = 'left'
  if section.settings.main_menu_alignment == 'center-left' or section.settings.main_menu_alignment == 'center-split' or section.settings.main_menu_alignment == 'center' or section.settings.main_menu_alignment == 'center-drawer'
    assign logo_alignment = 'center'
  endif

  assign dropdown_alignment = 'left'
  if section.settings.main_menu_alignment == 'left-center' or section.settings.main_menu_alignment == 'center-split' or section.settings.main_menu_alignment == 'center'
    assign dropdown_alignment = 'center'
  endif

  assign template_name = template | replace: '.', ' ' | truncatewords: 2, '' | handle

  assign sticky_header = false
  if section.settings.header_style == 'sticky'
    assign sticky_header = true
  endif
  assign overlay_header = false
  if template_name == 'index' and section.settings.sticky_index
    assign overlay_header = true
  endif
  if template_name == 'collection' and collection.image and section.settings.sticky_collection
    assign overlay_header = true
  endif
-%}

{% comment %}
  should be section group in future below
{% endcomment %}

{% assign animation_row = 1 %}
{% assign drawer_position = 'left' %}
{% if logo_alignment == 'center' %} {% assign drawer_position = 'left' %} {% endif %}
<div id="NavDrawer" class="drawer drawer--{{ drawer_position }}">
  <div class="drawer__contents drawer-menu-june23">
    <div class="drawer__fixed-header">
      <div class="drawer__header appear-animation">
        <!-- <div class="h2 drawer__title"></div> -->
        <img
          src="https://cdn.shopify.com/s/files/1/0263/3606/7666/files/logo_main.svg?v=1686922500"
          class="drwjn23_logo"
          width="110px"
          height="19px"
          alt="Logo"
        >

        <div class="drawer__close">
          <button type="button" class="drawer__close-button js-drawer-close">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64">
              <path d="M19 17.61l27.12 27.13m0-27.12L19 44.74" style="  color: #808080; " />
            </svg>
            <span class="icon__fallback-text">{{ 'general.drawers.close_menu' | t }}</span>
          </button>
        </div>
      </div>
    </div>
    <div class="drawer__scrollable">
      <div class="headmbl_search">
        <form
          action="{{ routes.search_url }}"
          method="get"
          role="search"
          id="HeaderSearchForm"
          class="site-header__search-form"
        >
          <input type="hidden" name="type" value="{{ settings.search_type }}">

          <input
            type="search"
            name="q"
            value="{{ search.terms | escape | replace: '*', '' }}"
            placeholder="{{ 'general.search.placeholder' | t }}"
            class="site-header__search-input"
            aria-label="{{ 'general.search.placeholder' | t }}"
          >
          <button type="submit" class="text-link site-header__search-btn site-header__search-btn--submit">
            <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-search" viewBox="0 0 64 64">
              <path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42" style="  color: #808080; " />
            </svg>
            <span class="icon__fallback-text">{{ 'general.search.submit' | t }}</span>
          </button>
        </form>
      </div>

      <div class="jundraccwa">
        {% for link in main_menu.links %}
          {% if link.links.size > 0 %}
            <button class="accordionjundrwr {% if forloop.first %} activejundrwr {% endif %}">{{ link.title }}</button>
            <div
              class="paneljundrwr"
              {% if forloop.first %}
                style="max-height: 425px"
              {% endif %}
            >
              <div class="jnp_inrd">
                <div class="jnp_inrmeta">
                  <div class="jnp_inrmsi">
                    {% for sublink in link.links %}
                      <a href="{{ sublink.url }}">{{ sublink.title }}</a>
                    {% endfor %}
                  </div>
                </div>
                {% assign current_index_mobile = forloop.index %}
                <div class="jnp_inrli">
                  {% for block in section.blocks %}
                    {% if block.type == 'mega' %}
                      {% if block.settings.mega_assignment == current_index_mobile %}
                        <div class="jnp_inrmls">
                          <div class="jnp_inrmlsi">
                            <a href="{{ block.settings.mega_url }}"
                              ><img
                                style="height: auto;"
                                src="{{ block.settings.mega_image | image_url: width: block.settings.mega_image.width }}"
                                width="{{ block.settings.mega_image.width }}"
                                height="{{ block.settings.mega_image.height }}"
                                alt="{{ block.settings.mega_title }}"
                            ></a>
                          </div>
                          <div class="jnp_inrmlsit">
                            <a href="{{ block.settings.mega_url }}"
                              ><strong>{{ block.settings.mega_title }}</strong>{{ block.settings.mega_text -}}
                            </a>
                          </div>
                          <div class="cb"></div>
                        </div>
                      {% endif %}
                    {% endif %}
                  {% endfor %}
                </div>
              </div>
            </div>
          {% else %}
            {% comment %} When no sub links exist it exists as a regular link with no underlying menu{% endcomment %}
            <a href="{{ link.url }}" class="jnp_intach">{{ link.title }}</a>
          {% endif %}
        {% endfor %}
      </div>

      <div class="mbl_nav_sticky">
        {% if customer.id == null %}
          <a class="site-nav__link site-nav__link--icon large--hide" href="/a/account/login">Log in</a>
        {% else %}
          <a class="site-nav__link site-nav__link--icon large--hide" href="/a/account/login">Account</a>
          <a class="site-nav__link site-nav__link--icon large--hide" href="{{ routes.account_logout_url }}">Logout</a>
        {% endif %}
        <a
          class="site-nav__link site-nav__link--icon large--hide"
          href="{{ pages['contact-us'].url }}"
          style="margin-left: 10px; "
          >Contact Us</a
        >
        <div class="drawer_lang medium-up--hides">
          {% render 'custom-lang-switch-june2023' %}
          <span class="ly-custom-0"></span>
        </div>
        <div class="cb"></div>
      </div>
    </div>
  </div>
</div>

{% comment %}
  should be section group in future ^^^^
{% endcomment %}
{%- render 'cart-drawer' -%}

<style>
  {% if section.settings.hide_original_announcement_bar %}
    .announcement-bar {
      display: none;
    }
  {% endif %}
  .site-nav__link,
  .site-nav__dropdown-link:not(.site-nav__dropdown-link--top-level) {
    font-size: {{ settings.type_navigation_size }}px;
  }
  {% if settings.type_navigation_capitalize %}
    .site-nav__link, .mobile-nav__link--top-level {
      text-transform: uppercase;
      letter-spacing: 0.2em;
    }
    .mobile-nav__link--top-level {
      font-size: 1.1em;
    }
  {% endif %}

  {% if mainmenu.length > 6 %}
    .site-nav__link {
      padding-left: 10px;
      padding-right: 10px;
    }
  {% endif %}

  {% unless section.settings.mega_menu_images %}
    .megamenu__colection-image {
      display: none;
    }
  {% endunless %}

  {%- if settings.color_header == settings.color_body_bg or settings.color_body_bg contains settings.color_header -%}
    .site-header {
      box-shadow: 0 0 1px rgba(0,0,0,0.2);
    }

    .toolbar + .header-sticky-wrapper .site-header {
      border-top: 0;
    }
  {%- endif -%}

  {%- if settings.color_announcement == settings.color_body_bg -%}
    .announcement-bar {
      border-bottom: 1px solid;
    }
  {%- endif -%}
</style>

<div data-section-id="{{ section.id }}" data-section-type="header">
  {%- if overlay_header or section.settings.announcement_above_header -%}
    {%- render 'announcement-bar', section: section -%}
  {%- endif -%}

  {%- unless overlay_header -%}
    {%- if section.settings.show_locale_selector
      or section.settings.show_currency_selector
      or section.settings.toolbar_social
      or section.settings.toolbar_menu != blank
    -%}
      {%- render 'toolbar', section: section, toolbar_menu: toolbar_menu, overlay_header: overlay_header -%}
    {%- endif -%}
  {%- endunless -%}

  <div class="header-sticky-wrapper">
    <div id="HeaderWrapper" class="header-wrapper{% if overlay_header %} header-wrapper--sticky is-light{% endif %}">
      {%- if overlay_header -%}
        {%- if section.settings.show_locale_selector
          or section.settings.show_currency_selector
          or section.settings.toolbar_social
          or section.settings.toolbar_menu != blank
        -%}
          {%- render 'toolbar', section: section, toolbar_menu: toolbar_menu, overlay_header: overlay_header -%}
        {%- endif -%}
      {%- endif -%}
      <header
        id="SiteHeader"
        class="site-header{% if settings.type_navigation_style == 'heading' %} site-header--heading-style{% endif %}"
        data-sticky="{{ sticky_header }}"
        data-overlay="{{ overlay_header }}"
      >
        <div class="page-width">
          <div
            class="header-layout header-layout--{{ section.settings.main_menu_alignment }}"
            data-logo-align="{{ logo_alignment }}"
          >
            <div class="header-item medium-up--hide header-item--icons">
              <div class="site-nav{% unless section.settings.main_menu_alignment == 'center-drawer' %} medium-up--hide{% endunless %}">
                <button
                  type="button"
                  class="site-nav__link site-nav__link--icon js-drawer-open-nav"
                  aria-controls="NavDrawer"
                >
                  <svg
                    aria-hidden="true"
                    focusable="false"
                    role="presentation"
                    class="icon icon-hamburger"
                    viewBox="0 0 64 64"
                  >
                    <path d="M7 15h51M7 32h43M7 49h51"/>
                  </svg>
                  <span class="icon__fallback-text">{{ 'general.drawers.navigation' | t }}</span>
                </button>
              </div>
            </div>
            {%- if logo_alignment == 'left' -%}
              <div class="header-item header-item--logo">
                {%- render 'header-logo-block', section: section -%}
              </div>
            {%- endif -%}

            {% comment %}
              Start Jared custom nav edit DESKTOP
            {% endcomment %}

            {%- if logo_alignment == 'left' and section.settings.main_menu_alignment != 'left-drawer' -%}
              <div class="header-item small--hide header-item--navigation{% if section.settings.main_menu_alignment == 'left-center' %} text-center{% endif %}">
                <ul class="site-nav site-navigation small--hide dc22_desknav" role="navigation" aria-label="Primary">
                  {% for link in main_menu.links %}
                    <li
                      class="site-nav__item {% if link.links.size > 0 %}site-nav__expanded-item site-nav--has-dropdown site-nav--is-megamenu {% endif %}"
                      {% if link.links.size > 0 %}
                        aria-haspopup="true"
                      {% endif %}
                    >
                      <a
                        href="{{ link.url }}"
                        class="site-nav__link site-nav__link--underline {% if link.links.size > 0 %} site-nav__link--has-dropdown {% endif %}"
                      >
                        {{- link.title -}}
                      </a>
                      {% if link.links.size > 0 %}
                        <div class="site-nav__dropdown megamenu text-left">
                          <div class="page-width">
                            <div class="grid grid--center">
                              <div class="grid__item medium-up--one-sixth">
                                <div class="jttnav_sradmpi">
                                  {% for sublink in link.links %}
                                    <div class="jttnav_sradma">
                                      {% if sublink.url contains 'fr-ca' and request.locale.iso_code == 'fr' %}
                                        <a
                                          class="site-nav__dropdown-link site-nav__dropdown-link--top-level"
                                          target="_blank"
                                          href="{{  sublink.url }}"
                                        >
                                          {{- sublink.title -}}
                                        </a>
                                      {% elsif sublink.url contains 'en-us' and request.locale.iso_code == 'en' %}
                                        <a
                                          class="site-nav__dropdown-link site-nav__dropdown-link--top-level"
                                          target="_blank"
                                          href="{{ sublink.url }}"
                                        >
                                          {{- sublink.title -}}
                                        </a>
                                      {% else %}
                                        {% unless sublink.url contains 'gorgias' %}
                                          <a
                                            class="site-nav__dropdown-link site-nav__dropdown-link--top-level"
                                            href="{{ sublink.url }}"
                                          >
                                            {{- sublink.title -}}
                                          </a>
                                        {% endunless %}
                                      {% endif %}
                                      {% comment %} <a href="{{ sublink.url }}" class="site-nav__dropdown-link site-nav__dropdown-link--top-level">{{ sublink.title }}</a> {% endcomment %}
                                    </div>
                                  {% endfor %}
                                </div>
                              </div>
                              {% assign current_index = forloop.index %}
                              {% for block in section.blocks %}
                                {% if block.type == 'mega' %}
                                  {% if block.settings.mega_assignment == current_index %}
                                    <div class="grid__item medium-up--one-fifth jttnav_srad text-center j-card-fix">
                                      <a href="{{ block.settings.mega_url }}"
                                        ><img
                                          style="height: auto;"
                                          class="lazy lazyload"
                                          src="{{ block.settings.mega_image | image_url: width: block.settings.mega_image.width }}"
                                          width="{{ block.settings.mega_image.width }}"
                                          height="{{ block.settings.mega_image.height }}"
                                          alt="{{ block.settings.mega_title }}"
                                      ></a>
                                      <div class="jttnav_sradm">
                                        <a
                                          href="{{ block.settings.mega_url }}"
                                          class="site-nav__dropdown-link site-nav__dropdown-link--top-level"
                                        >
                                          <strong>{{ block.settings.mega_title }}</strong>
                                          {{ block.settings.mega_text }}
                                        </a>
                                      </div>
                                    </div>
                                  {% endif %}
                                {% endif %}
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                      {% endif %}
                    </li>
                  {% endfor %}
                </ul>
              </div>
            {%- endif -%}

            {%- if logo_alignment == 'center' -%}
              <div class="header-item header-item--left header-item--navigation">
                {%- if section.settings.main_menu_alignment == 'center'
                  or section.settings.main_menu_alignment == 'center-split'
                -%}
                  {%- if settings.search_enable -%}
                    <div class="site-nav small--hide">
                      <a href="{{ routes.search_url }}" class="site-nav__link site-nav__link--icon js-search-header">
                        <svg
                          aria-hidden="true"
                          focusable="false"
                          role="presentation"
                          class="icon icon-search"
                          viewBox="0 0 64 64"
                        >
                          <path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42"/>
                        </svg>
                        <span class="icon__fallback-text">{{ 'general.search.title' | t }}</span>
                      </a>
                    </div>
                  {%- endif -%}
                {%- endif -%}

                {%- if section.settings.main_menu_alignment == 'center-left' -%}
                  {%- render 'header-desktop-nav', main_menu: main_menu, dropdown_alignment: dropdown_alignment -%}
                {%- endif -%}
              </div>

              {%- if section.settings.main_menu_alignment == 'center-split' -%}
                {%- render 'header-split-nav',
                  main_menu: main_menu,
                  section: section,
                  dropdown_alignment: dropdown_alignment
                -%}
              {%- endif -%}

              {%- if section.settings.main_menu_alignment != 'center-split' -%}
                <div class="header-item header-item--logo">
                  {%- render 'header-logo-block', section: section -%}
                </div>
              {%- endif -%}
            {%- endif -%}

            <div class="header-item header-item--icons">
              {%- render 'header-icons', section: section -%}
            </div>
          </div>

          {%- if section.settings.main_menu_alignment == 'center' -%}
            <div class="text-center">
              {%- render 'header-desktop-nav', main_menu: main_menu, dropdown_alignment: dropdown_alignment -%}
            </div>
          {%- endif -%}
        </div>
        <div class="site-header__search-container">
          <div class="site-header__search">
            <div class="page-width">
              <form
                action="{{ routes.search_url }}"
                method="get"
                role="search"
                id="HeaderSearchForm"
                class="site-header__search-form"
              >
                <input type="hidden" name="type" value="{{ settings.search_type }}">
                <input type="hidden" name="options[prefix]" value="last">
                <button type="submit" class="text-link site-header__search-btn site-header__search-btn--submit">
                  <svg
                    aria-hidden="true"
                    focusable="false"
                    role="presentation"
                    class="icon icon-search"
                    viewBox="0 0 64 64"
                  >
                    <path d="M47.16 28.58A18.58 18.58 0 1 1 28.58 10a18.58 18.58 0 0 1 18.58 18.58zM54 54L41.94 42"/>
                  </svg>
                  <span class="icon__fallback-text">{{ 'general.search.submit' | t }}</span>
                </button>
                <input
                  type="search"
                  name="q"
                  value="{{ search.terms | escape | replace: '*', '' }}"
                  placeholder="{{ 'general.search.placeholder' | t }}"
                  class="site-header__search-input"
                  aria-label="{{ 'general.search.placeholder' | t }}"
                >
              </form>
              <button type="button" id="SearchClose" class="js-search-header-close text-link site-header__search-btn">
                <svg
                  aria-hidden="true"
                  focusable="false"
                  role="presentation"
                  class="icon icon-close"
                  viewBox="0 0 64 64"
                >
                  <path d="M19 17.61l27.12 27.13m0-27.12L19 44.74"/>
                </svg>
                <span class="icon__fallback-text">{{ 'general.accessibility.close_modal' | t | json }}</span>
              </button>
            </div>
          </div>
          {%- if settings.predictive_search_enabled -%}
            <div
              id="PredictiveWrapper"
              class="predictive-results hide"
              data-image-size="{{ settings.predictive_image_size }}"
            >
              <div class="page-width">
                <div id="PredictiveResults" class="predictive-result__layout"></div>
                <div class="text-center predictive-results__footer">
                  <button type="button" class="btn btn--small" data-predictive-search-button>
                    <small>
                      {{ 'general.search.view_more' | t }}
                    </small>
                  </button>
                </div>
              </div>
            </div>
          {%- endif -%}
        </div>
      </header>
    </div>
  </div>

  {%- unless overlay_header or section.settings.announcement_above_header -%}
    {%- render 'announcement-bar', section: section -%}
  {%- endunless -%}
</div>

<script>
  var acc = document.getElementsByClassName('accordionjundrwr');
  var i;

  for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener('click', function () {
      this.classList.toggle('activejundrwr');
      var panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
      } else {
        panel.style.maxHeight = panel.scrollHeight + 'px';
      }
    });
  }
  /* $(".accordionjundrwr").click(function() {
        $(".accordionjundrwr").removeClass("activejundrwr");
        $(".paneljundrwr").hide();
        $(this).addClass("activejundrwr");
        $(this).next().show();
  }); */
  $('.amanav_shop').click(function () {
    $('.amanav_tab_shop').show();
    $('.amanav_tab_learn').hide();
    $('.amanav_link').removeClass('activer');
    $(this).addClass('activer');
  });
  $('.amanav_learn').click(function () {
    $('.amanav_tab_shop').hide();
    $('.amanav_tab_learn').show();
    $('.amanav_link').removeClass('activer');
    $(this).addClass('activer');
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "link_list",
      "id": "main_menu_link_list",
      "label": "Navigation",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "mega_menu_images",
      "label": "Show mega menu images",
      "default": true,
      "info": "[How to create a mega menu](https://archetypethemes.co/blogs/impulse/how-do-i-create-a-mega-menu)"
    },
    {
      "type": "select",
      "id": "main_menu_alignment",
      "label": "Header layout",
      "default": "left",
      "options": [
        {
          "value": "left",
          "label": "Logo left, menu left"
        },
        {
          "value": "left-center",
          "label": "Logo left, menu center"
        },
        {
          "value": "left-drawer",
          "label": "Logo left, menu drawer"
        },
        {
          "value": "center-left",
          "label": "Logo center, menu left"
        },
        {
          "value": "center-split",
          "label": "Logo center, menu split"
        },
        {
          "value": "center",
          "label": "Logo center, menu below"
        },
        {
          "value": "center-drawer",
          "label": "Logo center, menu drawer"
        }
      ]
    },
    {
      "type": "select",
      "id": "header_style",
      "label": "Header style",
      "default": "normal",
      "options": [
        {
          "value": "normal",
          "label": "Normal"
        },
        {
          "value": "sticky",
          "label": "Sticky"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "sticky_index",
      "label": "Overlay header over home page",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "sticky_collection",
      "label": "Overlay header over collection",
      "info": "(if collection image is enabled)",
      "default": false
    },
    {
      "type": "header",
      "content": "Announcement bar"
    },
    {
      "type": "checkbox",
      "id": "hide_original_announcement_bar",
      "label": "Hide Original Announcement Bar",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "announcement_compact",
      "label": "Use compact style"
    },
    {
      "type": "checkbox",
      "id": "announcement_above_header",
      "label": "Always show above header"
    },
    {
      "type": "header",
      "content": "Toolbar"
    },
    {
      "type": "link_list",
      "id": "toolbar_menu",
      "label": "Navigation",
      "info": "This menu won't show dropdown items"
    },
    {
      "type": "checkbox",
      "id": "toolbar_social",
      "label": "Show social icons"
    },
    {
      "type": "header",
      "content": "Language selector",
      "info": "To add a language, go to your [language settings.](/admin/settings/languages)"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "Show language selector",
      "default": true
    },
    {
      "type": "header",
      "content": "Currency selector",
      "info": "To add a currency, go to your [currency settings.](/admin/settings/payments)"
    },
    {
      "type": "checkbox",
      "id": "show_currency_selector",
      "label": "Show currency selector",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_currency_flags",
      "label": "Show currency flags",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "mega",
      "name": "Mega Menu Items",
      "settings": [
        {
          "type": "image_picker",
          "id": "mega_image",
          "label": "Mega Menu Image"
        },
        {
          "type": "text",
          "id": "mega_title",
          "label": "Mega Card Title"
        },
        {
          "type": "richtext",
          "id": "mega_text",
          "label": "Mega Menu Text"
        },
        {
          "type": "url",
          "id": "mega_url",
          "label": "Mega URL"
        },
        {
          "type": "number",
          "id": "mega_assignment",
          "label": "Index in top links where this card should go"
        }
      ]
    },
    {
      "type": "logo",
      "name": "Logo",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo"
        },
        {
          "type": "image_picker",
          "id": "logo-inverted",
          "label": "White logo",
          "info": "Used when on top of an image"
        },
        {
          "type": "range",
          "id": "desktop_logo_width",
          "label": "Desktop logo width",
          "default": 200,
          "min": 100,
          "max": 400,
          "step": 10,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "mobile_logo_width",
          "label": "Mobile logo width",
          "default": 140,
          "min": 60,
          "max": 200,
          "step": 10,
          "unit": "px",
          "info": "Set as a max-width, may appear smaller"
        }
      ]
    },
    {
      "type": "announcement",
      "name": "Announcement",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Heading",
          "default": "Hassle-free returns"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Text",
          "default": "30-day postage paid returns"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "default": {
    "settings": {}
  }
}
{% endschema %}
